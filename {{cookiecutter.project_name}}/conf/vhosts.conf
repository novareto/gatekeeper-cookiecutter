<VirtualHost *:443>
    ServerName {{cookiecutter.url}}

    # RewriteRules
    TKTAuthPublicKey {{cookiecutter.project_path}}/{{cookiecutter.project_name}}/pubkey.pem
    <Location /> 
        AuthType mod_auth_pubtkt 
        TKTAuthLoginURL http://{{cookiecutter.LoginHost}}/login
        TKTAuthTimeoutURL http://{{cookiecutter.LoginHost}}/timeout
        TKTAuthUnauthURL http://{{cookiecutter.LoginHost}}/unauthorized
        TKTAuthPassthruBasicAuth on
        TKTAuthPassthruBasicKey {{cookiecutter.secret}} 
        TKTAuthDebug 3 
        require valid-user 
    </Location>

    RewriteEngine on
    RewriteRule ^(/?.*) http://localhost:8888/app/++vh++http:extranett.novareto.de:80/++$1 [P,L]

</VirtualHost>

<VirtualHost *:443>
    ServerAdmin {{cookiecutter.ServerAdmin}}
    ServerName {{cookiecutter.LoginHost}}

    <Directory {{cookiecutter.project_path}}>
      Order Allow,Deny
      Allow from all
      Require all granted
    </Directory>

    LogLevel warn
    WSGIScriptAlias / {{cookiecutter.project_path}}/{{cookiecutter.project_name}}/parts/wsgi_app
    WSGIPassAuthorization On

    SetEnv CHAMELEON_CACHE {{cookiecutter.project_path}}/{{cookiecutter.project_name}}/cache
    RequestHeader set REMOTE_USER %{REMOTE_USER}e
</VirtualHost>


